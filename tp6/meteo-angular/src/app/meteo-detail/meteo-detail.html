<div *ngIf="meteo && meteo.cod == 200">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a href="http://localhost:4200/">ğŸ  Accueil</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">MÃ©tÃ©o pour {{ meteo.name }}</li>
    </ol>
  </nav>

  <div class="card shadow-sm" style="width: 350px; margin: 0 auto">
    <div class="card-header text-center">
      {{ meteo.name }} <br />
      <small>{{ meteo.dt * 1000 | date : 'EEEE d MMMM HH:mm' }}</small>
    </div>

    <!-- OpenWeatherMap tile -->
    <a
      class="map-link"
      [attr.href]="openWeatherDetailUrl || null"
      target="_blank"
      rel="noopener noreferrer"
      [title]="'Voir la reponse JSON OpenWeatherMap pour ' + meteo.name"
    >
      <div class="map-stack card-img-top" *ngIf="openWeatherTileUrl && osmTileUrl; else mapFallback">
        <img
          class="map-img map-base"
          [src]="osmTileUrl"
          [alt]="'Carte OpenStreetMap pour ' + meteo.name"
        />
        <img
          class="map-img map-overlay"
          [src]="openWeatherTileUrl"
          [alt]="'Couche meteo OpenWeatherMap pour ' + meteo.name"
        />
      </div>
      <span class="map-attribution">Map data: OpenStreetMap contributors | Weather layer: OpenWeatherMap</span>
    </a>
    <ng-template #mapFallback>
      <div class="map-placeholder card-img-top">Carte meteo indisponible</div>
    </ng-template>

    <div class="card-body text-center">
      <h4>
        <i class="wi wi-owm-day-{{ meteo.weather[0].id }}"></i>
        {{ meteo.main.temp }} <i class="wi wi-celsius"></i>
      </h4>

      <p class="text-muted">
        {{ meteo.weather[0].description }}
      </p>
    </div>

    <ul class="list-group list-group-flush">
      <li class="list-group-item">ğŸŒ¥ Nuages : {{ meteo.clouds.all }}%</li>
      <li class="list-group-item">ğŸ’§ HumiditÃ© : {{ meteo.main.humidity }}%</li>
      <li class="list-group-item">ğŸ’¨ Vent : {{ meteo.wind.speed }} km/h</li>
      <li class="list-group-item">
        ğŸŒ… Lever du soleil :
        {{ meteo.sys.sunrise * 1000 | date : 'H:mm' }}
      </li>
      <li class="list-group-item">
        ğŸŒ‡ Coucher du soleil :
        {{ meteo.sys.sunset * 1000 | date : 'H:mm' }}
      </li>
    </ul>

    <div class="forecast-container" *ngIf="forecastDays.length">
      <h5 class="forecast-title">Previsions sur 5 jours</h5>
      <div class="forecast-list">
        <div class="forecast-item" *ngFor="let day of forecastDays">
          <div class="forecast-date">{{ day.date | date : 'EEEE d MMM' }}</div>
          <div class="forecast-icon">
            <i class="wi wi-owm-day-{{ day.weatherId }}"></i>
          </div>
          <div class="forecast-temp">
            {{ day.temp | number : '1.0-0' }} <i class="wi wi-celsius"></i>
          </div>
          <div class="forecast-range">
            Min {{ day.tempMin | number : '1.0-0' }}&deg; / Max
            {{ day.tempMax | number : '1.0-0' }}&deg;
          </div>
          <div class="forecast-desc">{{ day.description }}</div>
        </div>
      </div>
    </div>

    <div *ngIf="forecastError" class="alert alert-warning mt-3">
      Previsions indisponibles : {{ forecastError }}
    </div>
  </div>
</div>

<!-- Message d'erreur -->
<div *ngIf="meteo && meteo.cod != 200" class="alert alert-danger mt-4">
  âŒ Erreur : {{ meteo.message }} (code {{ meteo.cod }})
</div>

